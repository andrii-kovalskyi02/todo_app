(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{26:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var c,o=n(5),a=n.n(o),r=(n(24),n(25),n(26),n(15)),l=n(4),s=n.n(l),i=n(9),u=n(2),d=n(0),b=n.n(d),f=n(35),j=n(1),p=n(3),m=n.n(p),h=b.a.memo((function(e){var t=e.isTempTodoTrue,n=e.areAllTodosCompleted,c=e.isToggleAllButtonVisible,o=e.showErrorMessage,a=e.onEnterKeyPress,r=e.onToggleAllButtonClick,l=Object(d.useState)(""),s=Object(u.a)(l,2),i=s[0],b=s[1],f=Object(d.useRef)(null);Object(d.useEffect)((function(){return function(){f.current&&f.current.focus()}}),[t]);return Object(j.jsxs)("header",{className:"todoapp__header",children:[c&&Object(j.jsx)("button",{type:"button",className:m()("todoapp__toggle-all",{active:n}),onClick:r,"aria-label":n?"Uncheck all todos":"Check all todos"}),Object(j.jsx)("form",{onSubmit:function(e){e.preventDefault();var t=i.trim();t?(a(t),b("")):o("Title can't be empty")},children:Object(j.jsx)("input",{type:"text",value:i,ref:f,className:"todoapp__new-todo",placeholder:"What needs to be done?",disabled:t,onChange:function(e){var t=e.target;b(t.value)}})})]})})),O=n(36),v=n(34),x=Object(d.createContext)({visibleTodos:[],tempTodo:null,completedTodoIdList:[],handleTodoRename:function(){},handleToggleButtonClick:function(){},handleRemoveButtonClick:function(){}}),k=b.a.memo((function(e){var t=e.todoId,n=e.todoTitle,c=e.exitEditionMode,o=Object(d.useState)(n),a=Object(u.a)(o,2),r=a[0],l=a[1],s=Object(d.useContext)(x),i=s.handleTodoRename,b=s.handleRemoveButtonClick,f=Object(d.useRef)(null);Object(d.useEffect)((function(){f.current&&f.current.focus()}),[]);var p=Object(d.useCallback)((function(e){var t=e.target.value;l(t)}),[]),m=function(){var e=r.trim();switch(e){case"":b(t);break;case n:break;default:i(t,e)}c()},h=Object(d.useCallback)((function(e){e.preventDefault(),m()}),[m]),O=Object(d.useCallback)((function(e){"Escape"===e.key&&c()}),[c]);return Object(j.jsx)("form",{onSubmit:h,children:Object(j.jsx)("input",{type:"text",value:r,className:"todo__title-field",placeholder:"Empty todo will be deleted",ref:f,onKeyUp:O,onBlur:m,onChange:p})})})),C=b.a.memo((function(e){var t=e.todo,n=e.isProcessing,c=void 0!==n&&n,o=t.id,a=t.title,r=t.completed,l=Object(d.useState)(!1),s=Object(u.a)(l,2),i=s[0],b=s[1],f=Object(d.useState)(a),p=Object(u.a)(f,2),h=p[0],O=p[1],v=Object(d.useContext)(x),C=v.handleToggleButtonClick,g=v.handleRemoveButtonClick,T=Object(d.useCallback)((function(){O(a),b(!0)}),[t]),_=Object(d.useCallback)((function(){b(!1)}),[]),N=Object(d.useCallback)((function(){C(o,r)}),[o,r]),y=Object(d.useCallback)((function(){g(o)}),[g,o]);return Object(j.jsxs)("div",{className:m()("todo",{completed:r}),children:[Object(j.jsx)("label",{htmlFor:"todo-checkbox",className:"todo__status-label",children:Object(j.jsx)("input",{type:"checkbox",id:"todo-checkbox",className:"todo__status",defaultChecked:r,onClick:N})}),i?Object(j.jsx)(k,{todoId:o,todoTitle:h,exitEditionMode:_}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{className:"todo__title",onDoubleClick:T,children:a}),Object(j.jsx)("button",{type:"button",className:"todo__remove",onClick:y,children:"\xd7"})]}),Object(j.jsxs)("div",{className:m()("modal","overlay",{"is-active":c}),children:[Object(j.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(j.jsx)("div",{className:"loader"})]})]})})),g=b.a.memo((function(){var e=Object(d.useContext)(x),t=e.visibleTodos,n=e.tempTodo,c=e.completedTodoIdList;return Object(j.jsx)("section",{className:"todoapp__main",children:Object(j.jsxs)(O.a,{children:[t.map((function(e){return Object(j.jsx)(v.a,{timeout:300,classNames:"item",children:Object(j.jsx)(C,{todo:e,isProcessing:c.includes(e.id)})},e.id)})),n&&Object(j.jsx)(v.a,{timeout:300,classNames:"temp-item",children:Object(j.jsx)(C,{todo:n,isProcessing:!0})},0)]})})}));!function(e){e.All="All",e.Active="Active",e.Completed="Completed"}(c||(c={}));var T=b.a.memo((function(e){var t=e.filter,n=e.itemsLeft,o=e.onFilter,a=e.onClearCompleted,r=e.completedCount,l=Object(d.useCallback)((function(e){var t=e.currentTarget.textContent;o(t)}),[o]);return Object(j.jsxs)("footer",{className:"todoapp__footer",children:[Object(j.jsx)("span",{className:"todo-count",children:"".concat(n," items left")}),Object(j.jsxs)("nav",{className:"filter",children:[Object(j.jsx)("a",{href:"#/",className:m()("filter__link",{selected:c.All===t}),onClick:l,children:"All"}),Object(j.jsx)("a",{href:"#/active",className:m()("filter__link",{selected:c.Active===t}),onClick:l,children:"Active"}),Object(j.jsx)("a",{href:"#/completed",className:m()("filter__link",{selected:c.Completed===t}),onClick:l,children:"Completed"})]}),Object(j.jsx)("button",{type:"button",className:"todoapp__clear-completed",disabled:!r,onClick:a,children:"Clear completed"})]})})),_=b.a.memo((function(e){var t=e.onCloseButton,n=e.errorMessage,c=e.hasError,o=Object(d.useCallback)((function(){t()}),[t]);return Object(j.jsxs)("div",{className:m()("notification","is-danger","is-light","has-text-weight-normal",{hidden:!c}),children:[Object(j.jsx)("button",{type:"button",className:"delete",onClick:o,"aria-label":"Close notification"}),Object(j.jsx)("span",{children:n})]})})),N="https://mate.academy/students-api";function y(e){return new Promise((function(t){setTimeout(t,e)}))}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c={method:t};return n&&(c.body=JSON.stringify(n),c.headers={"Content-Type":"application/json; charset=UTF-8"}),y(300).then((function(){return fetch(N+e,c)})).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var E=function(e){return w(e)},A=function(e,t){return w(e,"POST",t)},B=function(e,t){return w(e,"PATCH",t)},S=function(e){return w(e,"DELETE")},P=function(e,t){return B("/todos/".concat(e),t)},I=function(e){return S("/todos/".concat(e))},U=10509,M=function(){var e=Object(d.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],a=Object(d.useState)(c.All),l=Object(u.a)(a,2),b=l[0],p=l[1],m=Object(d.useState)(!1),O=Object(u.a)(m,2),v=O[0],k=O[1],C=Object(d.useState)(null),N=Object(u.a)(C,2),y=N[0],w=N[1],B=Object(d.useState)(""),S=Object(u.a)(B,2),M=S[0],R=S[1],L=Object(d.useState)([]),F=Object(u.a)(L,2),D=F[0],J=F[1],K=function(e){k(!0),R(e)},V=Object(d.useCallback)((function(){k(!v)}),[v]),G=Object(d.useMemo)((function(){return n.filter((function(e){return b===c.Active?!e.completed:b!==c.Completed||e.completed}))}),[n,b]),H=Object(d.useMemo)((function(){return n.filter((function(e){return!e.completed})).length}),[n]),W=Object(d.useMemo)((function(){return n.every((function(e){return e.completed}))}),[n]),q=Object(d.useCallback)(Object(i.a)(s.a.mark((function e(){var t,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=W?n.filter((function(e){return e.completed})):n.filter((function(e){return!e.completed})),J(t.map((function(e){return e.id}))),e.prev=2,e.next=5,Promise.all(t.map((function(e){return P(e.id,{completed:!e.completed})})));case 5:c=e.sent,o((function(e){return e.map((function(e){return c.find((function(t){return t.id===e.id}))||e}))})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),K("Unable to update the todos");case 12:return e.prev=12,J([]),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])}))),[n]),z=Object(d.useCallback)((function(e){var t;w({id:parseInt(Object(f.a)(),16),userId:U,title:e,completed:!1}),(t={userId:U,title:e,completed:!1},A("/todos",t)).then((function(e){return o((function(t){return[].concat(Object(r.a)(t),[e])}))})).catch((function(){return K("Unable to add a todo")})).finally((function(){return w(null)}))}),[]),Q=Object(d.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,n){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J([t]),e.prev=1,e.next=4,P(t,{completed:!n});case 4:c=e.sent,o((function(e){return e.map((function(e){return e.id===t?c:e}))})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),K("Unable to update a todo");case 11:return e.prev=11,J([]),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t,n){return e.apply(this,arguments)}}(),[n]),X=Object(d.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,n){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J([t]),e.prev=1,e.next=4,P(t,{title:n});case 4:c=e.sent,o((function(e){return e.map((function(e){return e.id===t?c:e}))})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),K("Unable to update a todo");case 11:return e.prev=11,J([]),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t,n){return e.apply(this,arguments)}}(),[n]),Y=Object(d.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J([t]),e.prev=1,e.next=4,I(t);case 4:o(n.filter((function(e){return e.id!==t}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),K("Unable to delete a todo");case 10:return e.prev=10,J([]),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),[n]),Z=Object(d.useCallback)((function(e){p(e)}),[]),$=Object(d.useCallback)(Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.filter((function(e){return e.completed})).map((function(e){return e.id})),J(t),e.prev=2,e.next=5,Promise.all(t.map((function(e){return I(e)})));case 5:o(n.filter((function(e){return!t.includes(e.id)}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),K("Unable to delete the todos");case 11:return e.prev=11,J([]),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])}))),[n]);return Object(d.useEffect)((function(){var e=setTimeout((function(){k(!1)}),3e3);return function(){clearTimeout(e)}}),[K]),Object(d.useEffect)((function(){var e;(e=U,E("/todos?userId=".concat(e))).then((function(e){return o(e)})).catch((function(){return K("Unable to load todos")}))}),[U]),Object(j.jsxs)("div",{className:"todoapp",children:[Object(j.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(j.jsxs)("div",{className:"todoapp__content",children:[Object(j.jsx)(h,{isToggleAllButtonVisible:!!n.length,isTempTodoTrue:!!y,showErrorMessage:K,onEnterKeyPress:z,onToggleAllButtonClick:q,areAllTodosCompleted:W}),Object(j.jsx)(x.Provider,{value:{visibleTodos:G,tempTodo:y,completedTodoIdList:D,handleTodoRename:X,handleToggleButtonClick:Q,handleRemoveButtonClick:Y},children:Object(j.jsx)(g,{})}),n.length>0&&Object(j.jsx)(T,{filter:b,itemsLeft:H,onFilter:Z,onClearCompleted:$,completedCount:n.length-H})]}),Object(j.jsx)(_,{hasError:v,errorMessage:M,onCloseButton:V})]})};a.a.render(Object(j.jsx)(M,{}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.aba51650.chunk.js.map